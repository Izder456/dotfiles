#!/usr/bin/env zsh

##
# ENV VARS
##
export VISUAL="emacsclient --create-frame --alternate-editor='emacs -Q'"
export EDITOR="nano"
export PAGER="most"
export PKG_PATH="http://cdn.OpenBSD.org/pub/OpenBSD/snapshots/packages/amd64"

##
# export $PATH
##
export PATH=$HOME/.cargo/bin:$HOME/.local/bin:$HOME/.emacs.d/bin:$HOME/.local/share/pkg/bin:$PATH

##
# Setup Completions
##
fpath=($HOME/.zsh-openbsd/completions $fpath)
setopt MENU_COMPLETE
setopt AUTO_LIST
setopt COMPLETE_IN_WORD


##
# Java Stuff
##
export PATH=$PATH:/usr/local/jdk-17/bin
export JAVA_HOME=/usr/local/jdk-17/

##
# Syntax Highlight
##
source ~/.zsh-fsh/fast-syntax-highlighting.plugin.zsh

##
# Suggestions
##
source ~/.zsh-suggest/zsh-autosuggestions.plugin.zsh

##
# FZF-Zsh
##
source ~/.zsh-fzf/fzf-tab.plugin.zsh
export FZF_DEFAULT_OPTS=$FZF_DEFAULT_OPTS'
    --color=fg:#A89984,bg:#282828,hl:#83A598
    --color=fg+:#BDAE93,bg+:#1D2021,hl+:#8EC07C
    --color=info:#D3869B,prompt:#FABD2F,pointer:#FABD2F
    --color=marker:#B16286,spinner:#B8BB26,header:#FE8019'

##
# 256-Color
##
source ~/.zsh-256/zsh-256color.plugin.zsh

##
# Ruby Stuff
##
export GEM_HOME="$HOME/.gems"

##
# Alias for muscle memory
##
alias sudo="doas"
alias su="echo 'did you mean to run doas -s? '"

##
# Alias for listing files
##
alias ls="eza --icons -h"
alias la="eza --icons -ah"
alias ll="eza --icons -lh"
alias lh="eza --icons -lah"

##
# Alias for parsing
##
alias cat="bat --theme=gruvbox-dark -pp"
alias bat="bat --theme=gruvbox-dark"
alias grep="ggrep --color=auto"
alias rgrep="rg"

##
# Alias for editing
##
alias edit=$EDITOR
alias vedit=$VISUAL
alias doasedit="doas $EDITOR"
alias sudoedit="doas $EDITOR"

##
# Alias for sysfetch
##
alias f="neofetch --off"
alias F="neofetch -L"
alias mf="pfetch"
alias uf="ufetch"

##
# Alias for sysstats
##
alias i="top"
alias H="htop"

##
# Alias for tarballz
##
alias btar="tar"
alias tar="gtar"

##
# Alias for yt-dlp
##
alias audio-dlp="yt-dlp -x --audio-quality 0 --audio-format vorbis \
	--concurrent-fragments 5"
alias video-dlp="yt-dlp --write-subs --sub-format srt --remux-video mkv \
	--embed-subs --concurrent-fragments 5"

##
# Prompt
##
PROMPT="%B%F{yellow}%~%f%b%B % %b"

##
# Tere config
##
tere() {
    local result=$(command tere "$@")
    [ -n "$result" ] && cd -- "$result"
}

##
# Transfer.sh
##
transfer() {
    if [ $# -eq 0 ]; then
        echo "No arguments specified.\nUsage:\n transfer <file|directory>\n ... | transfer <file_name>">&2;
        return 1;
    fi;
    if tty -s; then
        file="$1";
        file_name=$(basename "$file");
        if [ ! -e "$file" ]; then
            echo "$file: No such file or directory">&2;
            return 1;
        fi;
        if [ -d "$file" ]; then
            file_name="$file_name.zip" ,;
            (cd "$file" && zip -r -q - .) |
                curl --progress-bar --upload-file "-" "https://transfer.sh/$file_name" | tee /dev/null,;
        else cat "$file" |
                curl --progress-bar --upload-file "-" "https://transfer.sh/$file_name" | tee /dev/null;
        fi;
    else file_name=$1;
         curl --progress-bar --upload-file "-" "https://transfer.sh/$file_name" |
             tee /dev/null;
    fi;
}

##
# Node.JS
##
export PATH=~/.npm-global/bin:$PATH

##
# the r/unixporn rite of passage
##
afetch

. $HOME/.shellrc.load
